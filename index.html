<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LucrativeClix Coin ‚Äî LCC Faucet</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Ethers.js -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.3/dist/ethers.min.js"></script>

<!-- WalletConnect v2 -->
<script type="module">
  import EthereumProvider from "https://unpkg.com/@walletconnect/ethereum-provider/dist/index.min.js";
  window.EthereumProvider = EthereumProvider;
</script>

<!-- reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Poppins', sans-serif;
  overflow-x: hidden;
  background:
    radial-gradient(circle at 20% 20%, #6a00ff, transparent 40%),
    radial-gradient(circle at 80% 30%, #ff2fd1, transparent 45%),
    radial-gradient(circle at 50% 80%, #00e5ff, transparent 40%),
    #02010a;
  color: white;
}

/* Stars */
#stars { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
.star { position: absolute; width: 2px; height: 2px; background: white; border-radius: 50%; opacity: .8; animation: twinkle 3s infinite; }
@keyframes twinkle { 0%,100%{opacity:.8}50%{opacity:.2} }

.glow { text-shadow: 0 0 15px #b300ff, 0 0 30px #ff2fd1; }

.card { background: rgba(0,0,0,.65); backdrop-filter: blur(14px); border-radius: 24px; }

/* Eclipse loader */
.eclipse { position: relative; width: 120px; height: 120px; margin: auto; }
.sun { position: absolute; inset: 0; background: radial-gradient(circle,#ffd700,#ff9800); border-radius: 50%; box-shadow: 0 0 30px #ff9800; }
.moon { position: absolute; inset: 0; background: #02010a; border-radius: 50%; transform: translateX(-120%); animation: eclipseMove 2s linear infinite; }
@keyframes eclipseMove { 0%{transform:translateX(-120%)}100%{transform:translateX(120%)} }

/* Popup */
#popup {
  position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.85);
  display:none; flex-direction: column; justify-content:center; align-items:center; z-index:50;
  color:white; text-align:center;
}
#popup .planet { width:150px; height:150px; border-radius:50%; background: radial-gradient(circle,#00f,#0ff); margin-bottom:20px; animation: rotate 4s linear infinite; }
@keyframes rotate { 0%{transform:rotate(0deg)}100%{transform:rotate(360deg)} }
</style>
</head>
<body>

<div id="stars"></div>

<header class="text-center py-16 relative z-10">
  <h1 class="text-5xl font-extrabold glow">üåå LucrativeClix Coin</h1>
  <p class="mt-4 text-lg text-gray-200">Claim free LCC every 12 hours ‚Äî Sepolia</p>
</header>

<section class="flex justify-center px-4 relative z-10">
  <div class="card p-8 max-w-lg w-full shadow-2xl">

    <button id="mmBtn" class="w-full bg-purple-600 py-3 rounded-xl font-bold mb-3 hover:scale-105 transition">ü¶ä Connect MetaMask</button>
    <button id="wcBtn" class="w-full bg-indigo-600 py-3 rounded-xl font-bold mb-4 hover:scale-105 transition">üîó WalletConnect</button>

    <!-- reCAPTCHA -->
    <div class="mb-4">
      <div class="g-recaptcha" data-sitekey="6LeleSosAAAAAA8PloP5yhosOYWt423WBT553lIp"></div>
    </div>

    <button id="claimBtn" disabled class="w-full bg-pink-500 py-3 rounded-xl font-bold hover:scale-105 transition">üöÄ Claim LCC</button>

    <p id="status" class="mt-4 text-center"></p>
    <p id="balance" class="mt-2 text-center text-green-400 hidden"></p>

    <div id="eclipseLoader" class="hidden mt-6 flex flex-col items-center">
      <div class="eclipse"><div class="sun"></div><div class="moon"></div></div>
      <p id="loadPercent" class="mt-3 text-sm">0%</p>
    </div>

  </div>
</section>

<footer class="text-center py-12 text-gray-400 relative z-10">¬© 2025 LucrativeClix Coin</footer>

<!-- Popup for planet after claim -->
<div id="popup">
  <div class="planet"></div>
  <h2>üöÄ Claim Successful!</h2>
  <p id="popupBalance"></p>
  <button onclick="closePopup()" class="mt-4 bg-blue-600 py-2 px-4 rounded-xl">Close</button>
</div>

<script>
/* Stars background */
const stars=document.getElementById("stars");
for(let i=0;i<150;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.top=Math.random()*100+"%";
  s.style.left=Math.random()*100+"%";
  s.style.animationDelay=Math.random()*3+"s";
  stars.appendChild(s);
}

/* Elements */
const mmBtn=document.getElementById("mmBtn");
const wcBtn=document.getElementById("wcBtn");
const claimBtn=document.getElementById("claimBtn");
const status=document.getElementById("status");
const balanceP=document.getElementById("balance");
const loader=document.getElementById("eclipseLoader");
const loadPercent=document.getElementById("loadPercent");
const popup=document.getElementById("popup");
const popupBalance=document.getElementById("popupBalance");

let provider, signer, user;

/* Wallet Connectors */
mmBtn.onclick = async () => {
  if (!window.ethereum) { alert("MetaMask not installed"); return; }
  provider = new ethers.BrowserProvider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = await provider.getSigner();
  user = await signer.getAddress();
  claimBtn.disabled = false;
  status.textContent = "‚úÖ Connected: " + user;
};

wcBtn.onclick = async () => {
  try {
    const wc = await window.EthereumProvider.init({ projectId: "6e7e3a7f736b30fcd2d054bdfbe17bc6", chains:[11155111] });
    await wc.enable();
    provider = new ethers.BrowserProvider(wc);
    signer = await provider.getSigner();
    user = await signer.getAddress();
    claimBtn.disabled = false;
    status.textContent = "‚úÖ WalletConnect connected: " + user;
  } catch(e){ alert("WalletConnect failed or no wallet installed."); }
};

/* Loader */
function startLoader() {
  loader.classList.remove("hidden");
  let p = 0;
  return new Promise(res => {
    const i = setInterval(() => {
      p++; loadPercent.textContent = p + "%";
      if(p>=100){ clearInterval(i); res(); }
    }, 30);
  });
}
function stopLoader(){ loader.classList.add("hidden"); loadPercent.textContent="0%"; }

/* Popup */
function showPopup(balance){ popupBalance.textContent = "Balance: " + balance + " LCC"; popup.style.display="flex"; }
function closePopup(){ popup.style.display="none"; }

/* Claim */
claimBtn.onclick = async () => {
  const captchaResponse = grecaptcha.getResponse();
  if(!captchaResponse){ status.textContent="‚ö†Ô∏è Complete reCAPTCHA"; return; }

  claimBtn.disabled = true;
  status.textContent="‚è≥ Claiming...";
  await startLoader();

  try {
    // Call backend
    const res = await fetch("https://your-backend-domain.com/claim", {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify({ address: user, captcha: captchaResponse })
    });
    const data = await res.json();
    stopLoader();

    if(data.success){
      status.textContent="üéâ Claim successful!";
      balanceP.textContent = "Balance: " + data.balance + " LCC";
      balanceP.classList.remove("hidden");
      showPopup(data.balance);
      grecaptcha.reset();
    } else {
      status.textContent="‚ùå " + (data.error || "Claim failed");
      claimBtn.disabled=false;
    }
  } catch(e){
    stopLoader();
    console.log(e);
    status.textContent="‚ùå Claim error";
    claimBtn.disabled=false;
  }
};
</script>

</body>
    </html>
