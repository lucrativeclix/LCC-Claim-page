<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LucrativeClix Coin ‚Äî LCC Faucet</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Ethers.js -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.3/dist/ethers.min.js"></script>

<!-- Web3Modal v2 -->
<script type="module">
  import { Web3Modal } from "https://unpkg.com/@web3modal/standalone@2.7.2/dist/index.js";
  window.Web3Modal = Web3Modal;
</script>

<!-- reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<style>
html,body{margin:0;padding:0;font-family:Poppins,sans-serif;background:#02010a;color:white;overflow-x:hidden;}
#stars{position:fixed;inset:0;z-index:0;pointer-events:none}
.star{position:absolute;width:2px;height:2px;background:white;border-radius:50%;opacity:.8;animation:twinkle 3s infinite}
@keyframes twinkle{0%,100%{opacity:.8}50%{opacity:.2}}
.glow{text-shadow:0 0 15px #b300ff,0 0 30px #ff2fd1}
.card{background:rgba(0,0,0,.65);backdrop-filter:blur(14px);border-radius:24px;padding:2rem;}

/* Eclipse Loader */
.eclipse{position:relative;width:120px;height:120px;margin:auto}
.sun{position:absolute;inset:0;background:radial-gradient(circle,#ffd700,#ff9800);border-radius:50%;box-shadow:0 0 30px #ff9800}
.moon{position:absolute;inset:0;background:#02010a;border-radius:50%;transform:translateX(-120%);animation:eclipseMove 2s linear infinite}
@keyframes eclipseMove{0%{transform:translateX(-120%)}100%{transform:translateX(120%)}}

/* Pop-up Modal */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:50;opacity:0;pointer-events:none;transition:opacity .3s;}
.modal-bg.show{opacity:1;pointer-events:auto;}
.modal-content{background:rgba(10,10,20,0.95);padding:2rem;border-radius:2rem;max-width:400px;text-align:center;position:relative;overflow:hidden;}
.modal-content h2{font-size:2rem;margin-bottom:1rem;}
.modal-close{position:absolute;top:1rem;right:1rem;cursor:pointer;font-size:1.5rem;}
/* Planet animation */
.planet{width:100px;height:100px;border-radius:50%;background:radial-gradient(circle,#00ffe5,#0066ff);margin:1rem auto;animation:planetSpin 3s linear infinite}
@keyframes planetSpin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
</style>
</head>
<body>

<div id="stars"></div>

<header class="text-center py-16 relative z-10">
  <h1 class="text-5xl font-extrabold glow">üåå LucrativeClix Coin</h1>
  <p class="mt-4 text-lg text-gray-200">Claim free LCC ‚Äî Sepolia Network</p>
</header>

<section class="flex justify-center px-4 relative z-10">
  <div class="card shadow-2xl w-full max-w-lg">

    <!-- Wallet Connect -->
    <button id="connectBtn" class="w-full bg-purple-600 py-3 rounded-xl font-bold mb-4 hover:scale-105 transition">üîó Connect Wallet</button>

    <!-- reCAPTCHA -->
    <div class="mb-4">
      <div class="g-recaptcha" data-sitekey="6LeleSosAAAAAFrgl4nMa85sOOcJN0EM8P15JfQp"></div>
    </div>

    <!-- Claim -->
    <button id="claimBtn" disabled class="w-full bg-pink-500 py-3 rounded-xl font-bold hover:scale-105 transition">üöÄ Claim LCC</button>

    <!-- Status -->
    <p id="status" class="mt-4 text-center"></p>

    <!-- Loader -->
    <div id="eclipseLoader" class="hidden mt-6 flex flex-col items-center">
      <div class="eclipse"><div class="sun"></div><div class="moon"></div></div>
      <p id="loadPercent" class="mt-3 text-sm">0%</p>
    </div>

  </div>
</section>

<!-- Pop-up Modal for Balance & Celebration -->
<div id="modal" class="modal-bg">
  <div class="modal-content">
    <span id="modalClose" class="modal-close">&times;</span>
    <h2>üåç LCC Claimed!</h2>
    <div class="planet"></div>
    <p id="modalBalance">Balance: ‚Äî LCC</p>
  </div>
</div>

<footer class="text-center py-12 text-gray-400 relative z-10">¬© 2025 LucrativeClix Coin</footer>

<script type="module">
import { Web3Modal } from "https://unpkg.com/@web3modal/standalone@2.7.2/dist/index.js";
import { EthereumProvider } from "https://unpkg.com/@walletconnect/ethereum-provider/dist/index.min.js";

/* CONFIG */
const CHAIN_ID = 11155111;
const FAUCET_ADDRESS = "0x2c51c89b40b354614e77f9f5e75ccb36c1e43c49";
const LCC_TOKEN_ADDRESS = "0x873612265e161c3857d9223B1BA06Eb98D9dE65a";
const FAUCET_ABI = ["function claim() external"];
const ERC20_ABI = ["function balanceOf(address) view returns(uint256)","function decimals() view returns(uint8)"];
const WC_PROJECT_ID = "6e7e3a7f736b30fcd2d054bdfbe17bc6";

let provider, signer, user;

/* DOM */
const connectBtn = document.getElementById("connectBtn");
const claimBtn = document.getElementById("claimBtn");
const status = document.getElementById("status");
const loader = document.getElementById("eclipseLoader");
const loadPercent = document.getElementById("loadPercent");
const modal = document.getElementById("modal");
const modalClose = document.getElementById("modalClose");
const modalBalance = document.getElementById("modalBalance");

/* Stars background */
const stars=document.getElementById("stars");
for(let i=0;i<150;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.top=Math.random()*100+"%";
  s.style.left=Math.random()*100+"%";
  s.style.animationDelay=Math.random()*3+"s";
  stars.appendChild(s);
}

/* Loader */
function startLoader(){
  loader.classList.remove("hidden");
  let p=0;
  return new Promise(res=>{
    const i=setInterval(()=>{
      p++; loadPercent.textContent=p+"%";
      if(p>=100){clearInterval(i);res();}
    },30);
  });
}
function stopLoader(){
  loader.classList.add("hidden");
  loadPercent.textContent="0%";
}

/* Web3Modal Setup */
let web3Modal;
async function initWeb3Modal(){
  web3Modal = new Web3Modal({
    projectId: WC_PROJECT_ID,
    theme: "dark",
    accentColor: "purple",
    ethereum:{chains:[CHAIN_ID], appName:"LCC Faucet"}
  });
}
await initWeb3Modal();

/* Connect Wallet */
connectBtn.onclick = async () => {
  try{
    status.textContent = "‚è≥ Connecting wallet...";
    const connection = await web3Modal.connect();
    provider = new ethers.BrowserProvider(connection);
    signer = await provider.getSigner();
    user = await signer.getAddress();
    status.textContent = "‚úÖ Connected: "+user;
    claimBtn.disabled=false;
  }catch(e){
    console.error(e);
    status.textContent="‚ùå Wallet connection failed";
  }
};

/* Claim */
claimBtn.onclick = async () => {
  if(grecaptcha.getResponse().length===0){
    status.textContent="‚ö†Ô∏è Complete reCAPTCHA";
    return;
  }
  try{
    claimBtn.disabled=true;
    status.textContent="üåë Aligning eclipse...";
    await startLoader();

    const faucet = new ethers.Contract(FAUCET_ADDRESS, FAUCET_ABI, signer);
    const tx = await faucet.claim();
    status.textContent="‚õìÔ∏è Broadcasting transaction...";
    await tx.wait();

    stopLoader();
    await showModalBalance();
    status.textContent="üéâ LCC Claimed!";
    grecaptcha.reset();

    startCooldown(12*60*60);
  }catch(e){
    stopLoader();
    console.error(e);
    status.textContent="‚ùå Cooldown or faucet empty";
    claimBtn.disabled=false;
  }
};

/* Show Balance in Modal */
async function showModalBalance(){
  try{
    const token = new ethers.Contract(LCC_TOKEN_ADDRESS, ERC20_ABI, provider);
    const raw = await token.balanceOf(user);
    const dec = await token.decimals();
    modalBalance.textContent = `Balance: ${Number(raw)/10**dec} LCC`;
    modal.classList.add("show");
  }catch(e){
    console.error("Balance fetch failed",e);
    modalBalance.textContent="Balance: Error";
    modal.classList.add("show");
  }
}

/* Close Modal */
modalClose.onclick = ()=>modal.classList.remove("show");

/* Cooldown */
function startCooldown(sec){
  let r=sec;
  claimBtn.disabled=true;
  const t=setInterval(()=>{
    const h=Math.floor(r/3600);
    const m=Math.floor((r%3600)/60);
    const s=r%60;
    status.textContent=`‚è≥ Next claim in ${h}h ${m}m ${s}s`;
    r--;
    if(r<0){clearInterval(t);claimBtn.disabled=false;status.textContent="üöÄ You can claim again!";}
  },1000);
}
</script>
</body>
  </html>
