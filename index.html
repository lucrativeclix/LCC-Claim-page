<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LucrativeClix Coin â€” LCC Faucet</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Ethers v6 -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.3/dist/ethers.min.js"></script>

<!-- WalletConnect v2 -->
<script type="module">
  import EthereumProvider from "https://unpkg.com/@walletconnect/ethereum-provider/dist/index.min.js";
  window.EthereumProvider = EthereumProvider;
</script>

<!-- reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<style>
html,body{margin:0;padding:0;min-height:100%;font-family:Poppins,sans-serif;background:radial-gradient(circle at 20% 20%, #6a00ff, transparent 40%),radial-gradient(circle at 80% 30%, #ff2fd1, transparent 45%),radial-gradient(circle at 50% 80%, #00e5ff, transparent 40%),#02010a;color:white;}
#stars{position:fixed;inset:0;z-index:0;pointer-events:none}.star{position:absolute;width:2px;height:2px;background:white;border-radius:50%;opacity:.8;animation:twinkle 3s infinite}@keyframes twinkle{0%,100%{opacity:.8}50%{opacity:.2}}
.glow{text-shadow:0 0 15px #b300ff,0 0 30px #ff2fd1}
.card{background:rgba(0,0,0,.65);backdrop-filter:blur(14px);border-radius:24px}
/* Eclipse Loader */
.eclipse{position:relative;width:120px;height:120px}
.sun{position:absolute;inset:0;background:radial-gradient(circle,#ffd700,#ff9800);border-radius:50%;box-shadow:0 0 30px #ff9800}
.moon{position:absolute;inset:0;background:#02010a;border-radius:50%;transform:translateX(-120%);animation:eclipseMove 2s linear infinite}
@keyframes eclipseMove{0%{transform:translateX(-120%)}100%{transform:translateX(120%)}}
</style>
</head>
<body>

<div id="stars"></div>

<header class="text-center py-16 relative z-10">
  <h1 class="text-5xl font-extrabold glow">ğŸŒŒ LucrativeClix Coin</h1>
  <p class="mt-4 text-lg text-gray-200">Free LCC Faucet â€” Sepolia Network</p>
</header>

<section class="flex justify-center px-4 relative z-10">
  <div class="card p-8 max-w-lg w-full shadow-2xl">

    <button id="mmBtn" class="w-full bg-purple-600 py-3 rounded-xl font-bold mb-3 hover:scale-105 transition">ğŸ¦Š Connect MetaMask</button>
    <button id="wcBtn" class="w-full bg-indigo-600 py-3 rounded-xl font-bold mb-4 hover:scale-105 transition">ğŸ”— WalletConnect</button>

    <div class="mb-4">
      <div class="g-recaptcha" data-sitekey="6LeleSosAAAAAFrgl4nMa85sOOcJN0EM8P15JfQp"></div>
    </div>

    <button id="claimBtn" disabled class="w-full bg-pink-500 py-3 rounded-xl font-bold hover:scale-105 transition">ğŸš€ Claim LCC</button>

    <p id="balance" class="mt-4 text-center text-green-400">Balance: 0 LCC</p>
    <p id="status" class="mt-2 text-center"></p>

    <div id="eclipseLoader" class="hidden mt-6 flex flex-col items-center">
      <div class="eclipse"><div class="sun"></div><div class="moon"></div></div>
      <p id="loadPercent" class="mt-3 text-sm">0%</p>
    </div>

    <div id="celebrate" class="hidden mt-6 text-center text-3xl glow">âœ¨ CLAIM SUCCESS âœ¨</div>

  </div>
</section>

<footer class="text-center py-12 text-gray-400 relative z-10">Â© 2025 LucrativeClix Coin</footer>

<script>
/* Stars */
const stars=document.getElementById("stars");
for(let i=0;i<150;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.top=Math.random()*100+"%";
  s.style.left=Math.random()*100+"%";
  s.style.animationDelay=Math.random()*3+"s";
  stars.appendChild(s);
}

/* CONFIG */
const CHAIN_ID=11155111;
const FAUCET_ADDRESS="0x2c51c89b40b354614e77f9f5e75ccb36c1e43c49";
const LCC_TOKEN_ADDRESS="0xYOUR_LCC_TOKEN_ADDRESS_HERE"; // Replace with your LCC token contract
const FAUCET_ABI=["function claim() external"];
const ERC20_ABI=["function balanceOf(address) view returns(uint256)","function decimals() view returns(uint8)"];
const WC_PROJECT_ID="6e7e3a7f736b30fcd2d054bdfbe17bc6";

let provider,signer,user;

const mmBtn=document.getElementById("mmBtn");
const wcBtn=document.getElementById("wcBtn");
const claimBtn=document.getElementById("claimBtn");
const status=document.getElementById("status");
const celebrate=document.getElementById("celebrate");
const loader=document.getElementById("eclipseLoader");
const loadPercent=document.getElementById("loadPercent");
const balanceP=document.getElementById("balance");

/* Loader */
function startLoader(){
  loader.classList.remove("hidden");
  let p=0;
  return new Promise(res=>{
    const i=setInterval(()=>{
      p++; loadPercent.textContent=p+"%";
      if(p>=100){clearInterval(i);res();}
    },30);
  });
}
function stopLoader(){
  loader.classList.add("hidden");
  loadPercent.textContent="0%";
}

/* Balance */
async function updateBalance(){
  if(!signer) return;
  try{
    const token=new ethers.Contract(LCC_TOKEN_ADDRESS,ERC20_ABI,provider);
    const b=await token.balanceOf(user);
    const decimals=await token.decimals();
    balanceP.textContent=`Balance: ${Number(b)/10**decimals} LCC`;
  }catch(e){
    console.log("Balance fetch failed",e);
  }
}

/* MetaMask */
mmBtn.onclick=async()=>{
  try{
    status.textContent="â³ Connecting MetaMask...";
    provider=new ethers.BrowserProvider(window.ethereum);
    await provider.send("eth_requestAccounts",[]);
    signer=await provider.getSigner();
    user=await signer.getAddress();
    claimBtn.disabled=false;
    status.textContent="âœ… Connected: "+user;
    await updateBalance();
  }catch(e){
    status.textContent="âŒ MetaMask failed";
  }
};

/* WalletConnect */
wcBtn.onclick=async()=>{
  try{
    status.textContent="â³ Connecting WalletConnect...";
    const wc=await window.EthereumProvider.init({
      projectId:WC_PROJECT_ID,
      chains:[CHAIN_ID]
    });
    await wc.enable();
    provider=new ethers.BrowserProvider(wc);
    signer=await provider.getSigner();
    user=await signer.getAddress();
    claimBtn.disabled=false;
    status.textContent="âœ… Connected: "+user;
    await updateBalance();
  }catch(e){
    status.textContent="âŒ WalletConnect failed";
  }
};

/* Claim */
claimBtn.onclick=async()=>{
  if(grecaptcha.getResponse().length===0){
    status.textContent="âš ï¸ Complete reCAPTCHA";
    return;
  }
  try{
    claimBtn.disabled=true;
    status.textContent="ğŸŒ‘ Aligning eclipse...";
    await startLoader();

    const c=new ethers.Contract(FAUCET_ADDRESS,FAUCET_ABI,signer);
    const tx=await c.claim();
    status.textContent="â›“ï¸ Broadcasting transaction...";
    await tx.wait();

    stopLoader();
    celebrate.classList.remove("hidden");
    status.textContent="ğŸ‰ LCC Claimed!";
    await updateBalance();
    startCooldown(12*60*60);
    grecaptcha.reset(); // Reset CAPTCHA after successful claim
  }catch(e){
    stopLoader();
    console.log(e);
    status.textContent="âŒ Cooldown active or faucet empty";
    claimBtn.disabled=false;
  }
};

/* Cooldown */
function startCooldown(sec){
  let r=sec;
  claimBtn.disabled=true;
  const t=setInterval(()=>{
    const h=Math.floor(r/3600);
    const m=Math.floor((r%3600)/60);
    const s=r%60;
    status.textContent=`â³ Next claim in ${h}h ${m}m ${s}s`;
    r--;
    if(r<0){
      clearInterval(t);
      claimBtn.disabled=false;
      status.textContent="ğŸš€ You can claim again!";
    }
  },1000);
}
</script>
</body>
  </html>
