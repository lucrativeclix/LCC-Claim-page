<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LucrativeClix Coin (LCC) Claim Portal</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Ethers v6 -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.3/dist/ethers.min.js"></script>

<!-- WalletConnect (MODERN + WORKING) -->
<script type="module">
  import EthereumProvider from "https://unpkg.com/@walletconnect/ethereum-provider/dist/index.min.js";
  window.EthereumProvider = EthereumProvider;
</script>

<!-- Google reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<style>
body {
  font-family: 'Poppins', sans-serif;
  background: url("https://images.unsplash.com/photo-1601758123927-9d021f7dfeb7?auto=format&fit=crop&w=1920&q=80") no-repeat center center fixed;
  background-size: cover;
  color: white;
  overflow-x: hidden;
}
.glow {
  text-shadow: 0 0 10px #ff6ec7, 0 0 20px #6a00ff;
}
.star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  animation: twinkle 3s infinite;
}
@keyframes twinkle {
  0%,100% {opacity: .8}
  50% {opacity: .2}
}
</style>
</head>

<body>

<div id="stars"></div>

<header class="text-center py-16">
  <h1 class="text-5xl font-bold glow">üåå LucrativeClix Coin (LCC)</h1>
  <p class="mt-4 text-lg">Claim free LCC every 12 hours on Sepolia</p>
</header>

<section class="flex justify-center px-4">
  <div class="bg-black/70 p-8 rounded-3xl max-w-lg w-full backdrop-blur-xl shadow-2xl">

    <button id="metaMaskBtn" class="w-full bg-purple-600 py-3 rounded-xl mb-3 font-bold hover:scale-105 transition">
      Connect MetaMask
    </button>

    <button id="walletConnectBtn" class="w-full bg-indigo-600 py-3 rounded-xl mb-4 font-bold hover:scale-105 transition">
      Connect WalletConnect
    </button>

    <div class="g-recaptcha mb-4" data-sitekey="6LeleSosAAAAAFrgl4nMa85sOOcJN0EM8P15JfQp"></div>

    <button id="claimBtn" disabled class="w-full bg-pink-500 py-3 rounded-xl font-bold hover:scale-105 transition">
      Claim LCC
    </button>

    <p id="status" class="mt-4 text-center"></p>
    <p id="balance" class="mt-2 text-center font-bold"></p>

    <img id="celebrate" src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif"
         class="mx-auto mt-6 hidden w-64"/>
  </div>
</section>

<footer class="text-center mt-16 text-gray-300">
  ¬© 2025 LucrativeClix Coin ‚Äî Build First. Launch Right.
</footer>

<script>
/* ‚≠ê Stars */
const s = document.getElementById("stars");
for(let i=0;i<120;i++){
  const d=document.createElement("div");
  d.className="star";
  d.style.top=Math.random()*innerHeight+"px";
  d.style.left=Math.random()*innerWidth+"px";
  s.appendChild(d);
}

/* ================= CONFIG ================= */

/* üî¥ YOU MUST FILL THESE 2 VALUES üî¥ */
const INFURA_PROJECT_ID = "c36e33ca4a8f4828a1517ab6249690b2"; // OK
const LCC_CONTRACT = "0x873612265e161c3857d9223B1BA06Eb98D9dE65a";

/* Sepolia */
const CHAIN_ID = 11155111;

/* ABI MUST MATCH YOUR CONTRACT */
const ABI = [
  "function claim(address to) external",
  "function balanceOf(address user) view returns (uint256)",
  "function decimals() view returns (uint8)"
];

/* ========================================== */

let provider, signer, user;

const status = document.getElementById("status");
const balanceEl = document.getElementById("balance");
const claimBtn = document.getElementById("claimBtn");
const celebrate = document.getElementById("celebrate");

/* -------- MetaMask -------- */
document.getElementById("metaMaskBtn").onclick = async () => {
  if(!window.ethereum){
    status.textContent="‚ùå MetaMask not installed";
    return;
  }
  provider = new ethers.BrowserProvider(window.ethereum);
  await provider.send("eth_requestAccounts",[]);
  signer = await provider.getSigner();
  user = await signer.getAddress();
  ready("MetaMask connected");
};

/* -------- WalletConnect -------- */
document.getElementById("walletConnectBtn").onclick = async () => {
  const wc = await window.EthereumProvider.init({
    projectId: INFURA_PROJECT_ID,
    chains: [CHAIN_ID],
    rpcMap: {
      [CHAIN_ID]: `https://sepolia.infura.io/v3/${INFURA_PROJECT_ID}`
    }
  });
  await wc.enable();
  provider = new ethers.BrowserProvider(wc);
  signer = await provider.getSigner();
  user = await signer.getAddress();
  ready("WalletConnect connected");
};

/* -------- Ready -------- */
async function ready(msg){
  status.textContent = `‚úÖ ${msg}: ${user}`;
  claimBtn.disabled = false;
  await loadBalance();
}

/* -------- Balance -------- */
async function loadBalance(){
  const c = new ethers.Contract(LCC_CONTRACT, ABI, provider);
  const bal = await c.balanceOf(user);
  const dec = await c.decimals();
  balanceEl.textContent = `üí∞ Balance: ${ethers.formatUnits(bal, dec)} LCC`;
}

/* -------- Claim -------- */
claimBtn.onclick = async () => {
  if(grecaptcha.getResponse().length === 0){
    status.textContent="‚ö†Ô∏è Complete reCAPTCHA";
    return;
  }
  try{
    status.textContent="‚è≥ Claiming...";
    const c = new ethers.Contract(LCC_CONTRACT, ABI, signer);
    const tx = await c.claim(user);
    await tx.wait();
    status.textContent="üéâ Claim successful!";
    celebrate.classList.remove("hidden");
    loadBalance();
  }catch(e){
    status.textContent="‚ùå Claim failed (cooldown or no tokens)";
  }
};
</script>

</body>
    </html>
